{
  "id": "40d28fac-063b-4540-8b5a-bf663f232427",
  "name": "Consulta de ejemplo con agregación",
  "mode": "single",
  "index": ["logs-*"],
  "description": "Consulta que devuelve términos más frecuentes por msgSourceTypeName ",
  "aggregation_result": true,
  "query": {
    "aggs": {
      "3": {
        "terms": {
          "field": "msgSourceTypeName",
          "size": 20,
          "order": { "_count": "desc" }
        }
      }
    },
    "size": 0,
    "_source": { "excludes": [] },
    "stored_fields": ["*"],
    "script_fields": {},
    "docvalue_fields": [
      { "field": "insertedDate", "format": "date_time" },
      { "field": "logDate", "format": "date_time" },
      { "field": "normalDate", "format": "date_time" }
    ],
    "query": {
      "bool": {
        "must": [
          {
            "range": {
              "normalDate": {
                "gte": "{{gte}}",
                "lte": "{{lte}}",
                "format": "epoch_millis"
              }
            }
          },
          {
            "match": {
              "isEvent": true
            }
          }
        ],
        "filter": [
          {
            "bool": {
              "should": [{ "match_phrase": { "entityName": "farmatodo" } }],
              "minimum_should_match": 1
            }
          }
        ],
        "should": [],
        "must_not": []
      }
    },
    "timeout": "30000ms"
  }
}
